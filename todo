#!/usr/local/bin/python3

import sqlite3 as sqlite
import sys

DATABASE_NAME = "todolist.db"

def init():
    conn = sqlite.connect(DATABASE_NAME)
    with conn:
        cur = conn.cursor()
        cur.execute("CREATE TABLE IF NOT EXISTS task(description TEXT)")

def add(param):
    conn = sqlite.connect(DATABASE_NAME)	
    with conn:
        cur = conn.cursor()
        sql = "INSERT INTO task(description) values (?)"
        cur.execute(sql, [param])
        conn.commit()

def list():
    conn = sqlite.connect(DATABASE_NAME)
    with conn:
        cur = conn.cursor()
        sql = "SELECT * FROM task"
        cur.execute(sql)
        print(cur.fetchall())

def main(argv):
    init()
    if(argv[1] == "add"):
        add(argv[2])
    if(argv[1] == "list"):
        list()

if __name__ == "__main__":
        main(sys.argv)

        
